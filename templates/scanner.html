{% extends "base.html" %}
{% block content %}
<div class="qr-container">
  <h2 class="qr-title">ðŸ“· Ù…Ø§Ø³Ø­ Ø±Ù…Ø² QR Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ±</h2>

  <div id="reader" class="qr-reader"></div>

  <p id="result" class="qr-result"></p>

  <a href="{{ url_for('admin_dashboard') }}" class="btn back-btn">ðŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
</div>

<script src="https://unpkg.com/html5-qrcode"></script>
<script>
function onScanSuccess(decodedText, decodedResult) {
    document.getElementById('result').innerText = "âœ… Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...";
    window.location.href = decodedText;
    html5QrcodeScanner.clear();
}

function onScanError(errorMessage) {
    console.log("Scan error: ", errorMessage);
}

var html5QrcodeScanner = new Html5QrcodeScanner(
    "reader", { fps: 10, qrbox: 250 });
html5QrcodeScanner.render(onScanSuccess, onScanError);
</script>
{% endblock %}
